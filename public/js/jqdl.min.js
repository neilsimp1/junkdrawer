!function(t){t.fn.jqdl=function(){for(var e=0;e<this.length;e++){var n=this[e],i=n.id,l='<button type="button" class="btn btn-sm btn-default jqdl-addFiles jqdl-addFiles-'+i+'" data-id="'+i+'">Add Files</button>',a='<button type="button" class="btn btn-sm btn-default jqdl-removeFiles jqdl-removeFiles-'+i+'" data-id="'+i+'"><span class="glyphicon glyphicon-trash"></span></button>',d=document.createElement("div");d.className="btn-group",d.innerHTML=l+a;var s=document.createElement("span");s.setAttribute("id","span_display_"+i),s.setAttribute("data-toggle","tooltip"),s.setAttribute("data-flag","0"),s.style["margin-right"]="8px",s.style["font-size"]="0.85em",s.style["font-style"]="italic",n.style.display="none",t(n).after(d).after(s)}return t.fn.jqdl.btnAdd_click=function(t){t.click()},t.fn.jqdl.btnRemove_click=function(e){e.value="",e.type="text",e.type="file",t.fn.jqdl.fileInput_change(e),t(e).trigger("blur")},t.fn.jqdl.fileInput_change=function(e){if(!validateFiles(e))return void t.fn.jqdl.btnRemove_click(e);var n=document.getElementById("span_display_"+e.id);if(0===e.files.length)n.style.color="#A94442",n.innerHTML="0"==n.getAttribute("data-flag")?"":"No files",n.setAttribute("title",""),n.setAttribute("data-original-title","");else{var i=1===e.files.length?"file":"files";n.style.color="initial",n.innerHTML=e.files.length+" "+i;for(var l=[],a=0;a<e.files.length;a++)l.push(e.files[a].name);var d=l.join("\r\n");n.setAttribute("title",d),n.setAttribute("data-original-title",d),n.setAttribute("data-flag","1")}},t.fn.jqdl.clearAllFiles=function(){t("input[type=file]").each(function(){this.nextElementSibling.nextElementSibling.children[1].click()})},t(this).change(function(){t.fn.jqdl.fileInput_change(this)}),t(".jqdl-addFiles").on("click",function(){t.fn.jqdl.btnAdd_click(document.getElementById(t(this).data("id")))}),t(".jqdl-removeFiles").on("click",function(){t.fn.jqdl.btnRemove_click(document.getElementById(t(this).data("id")))}),this}}(jQuery),$(document).ready(function(){$("input[type=file]").jqdl()});
